<!doctype html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Kotbaas Dashboard</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f7fa;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #003b95;
            color: white;
            padding: 20px;
            display:flex;
            align-items:center;
            justify-content:space-between;
        }
        .auth-links a {
            color:#fff;
            text-decoration:none;
            margin-left:14px;
            font-weight:600;
            padding:8px 12px;
            border:1px solid rgba(255,255,255,0.4);
            border-radius:6px;
            display:inline-block;
        }
        .auth-links a:hover { background:rgba(255,255,255,0.15); }

        .container {
            width: 92%;
            max-width: 900px;
            margin: 40px auto;
        }

        h2 {
            color: #003b95;
            margin-top: 40px;
            margin-bottom: 15px;
        }

        .btn-primary {
            background-color: #0071c2;
            border: none;
            color: white;
            padding: 12px 18px;
            border-radius: 8px;
            font-size: 15px;
            cursor: pointer;
            font-weight: bold;
        }

        .btn-primary:hover {
            background-color: #005999;
        }

        .btn-danger {
            background-color: #d93025;
            border: none;
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
        }

        .btn-danger:hover {
            background-color: #b9231b;
        }

        .kot-card {
            background: white;
            padding: 20px;
            border-radius: 14px;
            box-shadow: 0 4px 14px rgba(0,0,0,0.1);
            margin-bottom: 25px;
        }

        .info-line {
            margin: 3px 0;
            color: #555;
        }

        .top-btn {
            margin-bottom: 30px;
        }

        .inbox-card {
            background: white;
            padding: 18px;
            border-radius: 14px;
            box-shadow: 0 3px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        
    </style>
</head>

<body>

<header>
    <h1 style="margin:0;">Welkom terug, {{ naam }}!</h1>
    <div class="auth-links">
        <a href="{{ url_for('logout') }}">Uitloggen</a>
    </div>
</header>

<div class="container">

    <!-- KOT TOEVOEGEN -->
    <form action="{{ url_for('add_kot') }}" class="top-btn">
        <button type="submit" class="btn-primary">+ Voeg een kot toe</button>
    </form>

    <!-- VERHUURDE KOTEN -->
    <h2>Mijn verhuurde koten</h2>

    {% for kot in koten %}
        <div class="kot-card">
            <h3 style="margin-top:0;">{{ kot.adres }}, {{ kot.stad }}</h3>

            <p class="info-line">Oppervlakte: {{ kot.oppervlakte }} m²</p>
            <p class="info-line">Slaapplaatsen: {{ kot.aantal_slaapplaatsen }}</p>
            <p class="info-line">Prijs: <strong>€{{ kot.maandhuurprijs }}/maand</strong></p>

            <p class="info-line">Student: {{ kot.student.gebruiker.naam if kot.student else "n.v.t." }}</p>
            <p class="info-line">Initiatiefnemer: {{ kot.initiatiefnemer }}</p>

            <form action="{{ url_for('verwijder_kot', kot_id=kot.kot_id) }}" method="post">
                <button class="btn-danger"
                onclick="return confirm('Weet je zeker dat je dit kot wilt verwijderen?');">
                Verwijder
                </button>
            </form>
        </div>
    {% else %}
        <p class="info-line">Je verhuurt nog geen koten.</p>
    {% endfor %}

    <!-- INBOX -->
    <h2>Inbox</h2>

    {% for kot in pending_koten %}
        <div class="inbox-card">
            <p><strong>Student:</strong> {{ kot.student.gebruiker.naam }}</p>
            <p><strong>Adres:</strong> {{ kot.adres }}</p>

            <form method="post" action="{{ url_for('approve_kot', kot_id=kot.kot_id) }}">
                <button class="btn-primary">Akkoord</button>
            </form>
        </div>
    {% else %}
        <p class="info-line">Je hebt geen verzoeken om te accorderen.</p>
    {% endfor %}

    <!-- CONTRACTEN TE ONDERTEKENEN -->
    <h2>Contracten te ondertekenen</h2>

    {% for contract in contracten_te_ondertekenen %}
        <div class="inbox-card">
            <p><strong>Kot:</strong> {{ contract.kot.adres }}, {{ contract.kot.stad }}</p>
            <p><strong>Student:</strong> {{ contract.student.gebruiker.naam }}</p>
            <!-- Download leeg Gitoo-contract -->
            <p>
                <a href="{{ url_for('static', filename='contracts/Gitoo_Verhuurcontract.pdf') }}"
                   class="btn-primary"
                   download>
                    Download leeg Gitoo‑contract
                </a>
            </p>
            <p class="info-line" style="margin-top:4px;">
                Download dit document, vul het in en onderteken het. Upload daarna de ondertekende versie hieronder.
            </p>

            <form method="post"
                  action="{{ url_for('contract_kotbaas', kot_id=contract.kot_id) }}"
                  enctype="multipart/form-data">
                <label>Upload ondertekend contract (PDF/afbeelding)</label><br>
                <input type="file" name="contract_file" accept=".pdf,.png,.jpg,.jpeg" required>
                <br><br>
                <button class="btn-primary">Upload contract</button>
            </form>
        </div>
    {% else %}
        <p class="info-line">Je hebt geen contracten te ondertekenen.</p>
    {% endfor %}    


    

</div>

</body>
</html>
