<!doctype html>
<html>
<head>
    <title>Koten Zoeken</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #003b95;
            color: white;
            padding: 20px;
            display:flex;
            justify-content:space-between;
            align-items:center;
        }

        header h1 {
            margin: 0;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: auto;
            padding: 20px 0;
        }

        /* Zoekbalk */
        .filter-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            margin-bottom: 25px;
        }

        .filter-box input[type=text],
        .filter-box input[type=number],
        .filter-box input[type=date] {
            padding: 8px;
            margin: 5px 0;
            width: 200px;
        }

        .filter-box label {
            margin-right: 10px;
        }

        .btn {
            background-color: #0071c2;
            color: white;
            padding: 10px 14px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .btn:hover {
            background-color: #005999;
        }

        /* BOOKING STYLE GRID */
        .kot-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
        }

        /* BOOKING STYLE CARD */
        .kot-card {
            background: #ffffff;
            border-radius: 14px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: 0.2s ease;
        }

        .kot-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 22px rgba(0,0,0,0.15);
        }

        .kot-card img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            display: block;
        }

        .kot-info {
            padding: 18px;
        }

        .kot-title {
            font-size: 20px;
            font-weight: 700;
            margin: 0 0 6px 0;
        }

        .kot-location {
            color: #6c757d;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .kot-details {
            color: #555;
            margin-bottom: 6px;
        }

        .price-tag {
            color: #0071c2;
            font-weight: 700;
            font-size: 18px;
            margin-top: 10px;
        }

        .book-btn {
            display: inline-block;
            margin-top: 12px;
            background-color: #0071c2;
            padding: 10px 16px;
            color: white;
            border-radius: 6px;
            text-decoration: none;
        }

        .book-btn:hover {
            background-color: #005999;
        }

        header .auth-links a {
            color:#fff;
            text-decoration:none;
            margin-left:14px;
            font-weight:600;
            padding:8px 12px;
            border:1px solid rgba(255,255,255,0.4);
            border-radius:6px;
            display:inline-block;
        }
        header .auth-links a:hover {
            background:rgba(255,255,255,0.15);
        }
    </style>
</head>

<body>

<header>
    <h1>Koten Zoeken</h1>
    <div class="auth-links">
        {% if session.get('gebruiker_id') or session.get('rol') == 'admin' %}
            <a href="{{ url_for('logout') }}">Uitloggen</a>
        {% else %}
            <a href="{{ url_for('login') }}">Login</a>
            <a href="{{ url_for('register') }}">Registreer</a>
        {% endif %}
    </div>
</header>

<div class="container">

    <!-- FILTERS -->
    <div class="filter-box">
        <form method="get">
            <input type="text" name="stad" placeholder="Stad" value="{{ filters.stad }}">
            <input type="number" name="max_huur" placeholder="Max huur (€)" value="{{ filters.max_huur }}">
            <input type="number" name="min_oppervlakte" placeholder="Min m²" value="{{ filters.min_oppervlakte }}">
            <input type="number" name="aantal_slaapplaatsen" placeholder="Slaapplaatsen" value="{{ filters.aantal_slaapplaatsen }}">
            <input type="number" step="0.01" name="max_egwkosten" placeholder="Max EGW (€)" value="{{ filters.max_egwkosten }}">

            <br><br>

            <label>Startdatum:</label>
            <input type="date" name="startdatum" value="{{ filters.startdatum }}">

            <label>Einddatum:</label>
            <input type="date" name="einddatum" value="{{ filters.einddatum }}">

            <br><br>

            <label><input type="checkbox" name="eigen_keuken" value="1" {% if filters.eigen_keuken == '1' %}checked{% endif %}> Eigen keuken</label>
            <label><input type="checkbox" name="eigen_sanitair" value="1" {% if filters.eigen_sanitair == '1' %}checked{% endif %}> Eigen sanitair</label>

            <br><br>

            <button class="btn" type="submit">Toepassen</button>
            <a class="btn" href="{{ url_for('index') }}" style="background:#e0e0e0; color:black;">Wissen</a>
        </form>
    </div>

    <!-- RESULTATEN -->
    {% if koten %}
    <div class="kot-grid">
        {% for kot in koten %}
        <div class="kot-card">

            {% if kot.foto %}
                <img src="{{ kot.foto }}" alt="Foto van kot">
            {% else %}
                <img src="https://via.placeholder.com/600x400?text=Geen+Foto" alt="Geen foto">
            {% endif %}

            <div class="kot-info">

                <div class="kot-title">{{ kot.adres }}</div>
                <div class="kot-location">{{ kot.stad }}</div>

                <div class="kot-details">{{ kot.oppervlakte }} m² • {{ kot.aantal_slaapplaatsen }} slaapplaatsen</div>

                <div class="price-tag">Vanaf €{{ kot.maandhuurprijs }}/maand</div>

                {% if kot.beschrijving %}
                    <p style="margin-top:10px;">{{ kot.beschrijving }}</p>
                {% endif %}

                {% if kot.beschikbaarheden %}
                    {% for b in kot.beschikbaarheden %}
                        <p><strong>Beschikbaar:</strong> {{ b.startdatum.strftime('%Y-%m-%d') }} → {{ b.einddatum.strftime('%Y-%m-%d') }}</p>
                    {% endfor %}
                {% endif %}

                <a class="book-btn" href="{{ url_for('boek', kot_id=kot.kot_id) }}">Nu boeken</a>
            </div>
        </div>
        {% endfor %}
    </div>

    {% else %}
        <p style="color:red; font-size:18px;">Geen koten gevonden.</p>
    {% endif %}

</div>

</body>
</html>


