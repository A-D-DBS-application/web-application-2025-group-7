{% extends 'dashboard_admin.html' %}
{% block dashboard_content %}
<h2>Alle boekingen</h2>
<style>
    .booking-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1rem;
    }
    .booking-table th,
    .booking-table td {
        border: 1px solid #ddd;
        padding: 0.5rem 0.75rem;
        text-align: left;
    }
    .booking-table thead {
        background-color: #f5f5f5;
    }
</style>
<table class="booking-table">
    <thead>
        <tr>
            <th>Huurder</th>
            <th>Email</th>
            <th>Telefoon</th>
            <th>Kot</th>
            <th>Aantal personen</th>
            <th>Status</th>
            <th>Periode</th>
        </tr>
    </thead>
    <tbody>
        {% for boeking in boekingen %}
            {% set gebruiker = boeking.huurder.gebruiker if boeking.huurder else None %}
            <tr>
                <td>{{ gebruiker.naam if gebruiker else 'n.v.t.' }}</td>
                <td>{{ gebruiker.email if gebruiker else 'n.v.t.' }}</td>
                <td>
                    {% if gebruiker and gebruiker.telefoon %}
                        {{ gebruiker.telefoon | format_phone }}
                    {% else %}
                        n.v.t.
                    {% endif %}
                </td>
                <td>
                    {{ boeking.kot.adres if boeking.kot else 'n.v.t.' }},
                    {{ boeking.kot.stad if boeking.kot else '' }}
                </td>
                <td>{{ boeking.aantal_personen }}</td>
                <td>{{ boeking.status_boeking }}</td>
                {% set start = boeking.startdatum %}
                {% set eind = boeking.einddatum %}
                <td>
                    {% if start or eind %}
                        {% set start_str = start.strftime('%Y-%m-%d') if start else 'n.v.t.' %}
                        {% set eind_str = eind.strftime('%Y-%m-%d') if eind else 'n.v.t.' %}
                        {{ start_str }} t.e.m. {{ eind_str }}
                        {% if start and eind %}
                            {% set dagen = (eind - start).days %}
                            {% if dagen < 1 %}
                                {% set dagen = 1 %}
                            {% endif %}
                            ({{ dagen }} dagen)
                        {% endif %}
                    {% else %}
                        n.v.t.
                    {% endif %}
                </td>
            </tr>
        {% else %}
            <tr><td colspan="7">Geen boekingen gevonden.</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
